# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

## Структура проекта
src/
├── components/         # Компоненты приложения
│   ├── base/           # Базовые классы
│   │   ├── api.ts      # API-клиент
│   │   └── events.ts   # Брокер событий
│   ├── AppData.ts      # Модели данных
│   ├── Basket.ts       # Корзина товаров
│   ├── Card.ts         # Карточки товаров
│   ├── Components.ts   # Базовый компонент
│   ├── Contacts.ts     # Форма контактов
│   ├── Form.ts         # Базовая форма
│   ├── Modal.ts        # Модальное окно
│   ├── Model.ts        # Базовая модель
│   ├── Order.ts        # Форма заказа
│   ├── Page.ts         # Главная страница
│   └── Success.ts      # Сообщение об успехе
├── types/              # Типы TypeScript
│   └── index.ts        # Основные типы
├── utils/              # Вспомогательные функции
│   ├── constants.ts    # Константы
│   └── utils.ts        # Утилиты
├── scss/               # Стили
└── index.ts            # Точка входа

## Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```

## Сборка

```
npm run build
```

или

```
yarn build
```

## Описание архитектуры

Проект "Веб-ларек" реализует архитектуру MVP (Model-View-Presenter), которая разделяет логику приложения на три основных компонента: модели, представления и обработчики событий. Это позволяет добиться изолированности и единственной ответственности каждого компонента.

### Основные компоненты архитектуры

1. **Модели (Models)**:
   - Классы, описывающие структуру данных приложения (например, `Product`, `AppState`, `Order`).
   - Отвечают за управление состоянием приложения, валидацию данных и взаимодействие с API.

2. **Представления (Views)**:
   - Компоненты, отвечающие за отображение данных на экране (например, `Card`, `Basket`, `Modal`, `Order`).
   - Обрабатывают события, связанные с пользовательским интерфейсом, и обновляют отображение в соответствии с изменениями данных.

3. **Брокер событий (EventEmitter)**:
   - Обеспечивает связь между моделями и представлениями.
   - Позволяет компонентам взаимодействовать друг с другом без прямых зависимостей, что упрощает тестирование и поддержку кода.

### Взаимодействие компонентов

- **Клиент API** (`Api`): взаимодействует с сервером для получения и отправки данных.
- **Компоненты представления** (например, `Basket`, `Card`, `Modal`) подписываются на события, чтобы реагировать на действия пользователя (например, добавление товара в корзину или оформление заказа).
- **Модели** обновляют свое состояние и вызывают соответствующие события, которые обрабатываются представлениями для обновления интерфейса.

### Типы данных

Типы данных описаны в файле `src/types/index.ts` и включают:
- Интерфейсы для товаров (`IProduct`), заказов (`IOrder`), форм (`IOrderForm`), а также для состояния приложения (`IAppState`).
- Определения ошибок форм (`FormErrors`) и ответов API (`ApiResponse`).

### Процессы в приложении

1. **Получение товаров с сервера**: при загрузке страницы приложение запрашивает список товаров и обновляет состояние модели.
2. **Добавление товара в корзину**: пользователь может добавить товар в корзину, что обновляет состояние и отображение.
3. **Оформление заказа**: процесс разделен на два шага, где пользователь вводит информацию о доставке и контактные данные.
4. **Отправка заказа на сервер**: после заполнения всех полей данные отправляются на сервер, и пользователь получает уведомление об успешной оплате.